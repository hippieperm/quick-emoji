import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:flutter_emoji/flutter_emoji.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: '이모지 모음',
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.pinkAccent),
        useMaterial3: true,
      ),
      home: const EmojiHomePage(title: '이모지 모음'),
    );
  }
}

class EmojiHomePage extends StatefulWidget {
  const EmojiHomePage({super.key, required this.title});

  final String title;

  @override
  State<EmojiHomePage> createState() => _EmojiHomePageState();
}

class _EmojiHomePageState extends State<EmojiHomePage>
    with SingleTickerProviderStateMixin {
  late TabController _tabController;
  String _selectedEmoji = '';
  bool _copied = false;

  // 이모지 카테고리 정의
  final List<Map<String, dynamic>> _categories = [
    {
      'name': '표정',
      'emojis': [
        '😀',
        '😃',
        '😄',
        '😁',
        '😆',
        '😅',
        '🤣',
        '😂',
        '🙂',
        '🙃',
        '😉',
        '😊',
        '😇',
        '🥰',
        '😍',
        '🤩',
        '😘',
        '😗',
        '😚',
        '😙',
        '😋',
        '😛',
        '😜',
        '🤪',
        '😝',
        '🤑',
        '🤗',
        '🤭',
        '🤫',
        '🤔',
        '🤐',
        '🤨',
        '😐',
        '😑',
        '😶',
        '😏',
        '😒',
        '🙄',
        '😬',
        '🤥',
        '😌',
        '😔',
        '😪',
        '🤤',
        '😴',
        '😷',
        '🤒',
        '🤕',
        '🤢',
        '🤮',
        '🤧',
        '🥵',
        '🥶',
        '🥴',
        '😵',
        '🤯',
        '🤠',
        '🥳',
        '😎',
        '🤓',
        '🧐',
        '😕',
        '😟',
        '🙁',
        '☹️',
        '😮',
        '😯',
        '😲',
        '😳',
        '🥺',
        '😦',
        '😧',
        '😨',
        '😰',
        '😥',
        '😢',
        '😭',
        '😱',
        '😖',
        '😣',
        '😞',
        '😓',
        '😩',
        '😫',
        '🥱',
        '😤',
        '😡',
        '😠',
        '🤬',
        '😈',
        '👿',
        '💀',
        '☠️',
        '💩',
        '🤡',
        '👹',
        '👺',
        '👻',
        '👽',
        '👾',
        '🤖',
        '😺',
        '😸',
        '😹',
        '😻',
        '😼',
        '😽',
        '🙀',
        '😿',
        '😾',
      ],
    },
    {
      'name': '사람',
      'emojis': [
        '👋',
        '🤚',
        '🖐️',
        '✋',
        '🖖',
        '👌',
        '🤌',
        '🤏',
        '✌️',
        '🤞',
        '🤟',
        '🤘',
        '🤙',
        '👈',
        '👉',
        '👆',
        '🖕',
        '👇',
        '☝️',
        '👍',
        '👎',
        '✊',
        '👊',
        '🤛',
        '🤜',
        '👏',
        '🙌',
        '👐',
        '🤲',
        '🤝',
        '🙏',
        '✍️',
        '💅',
        '🤳',
        '💪',
        '🦾',
        '🦵',
        '🦿',
        '🦶',
        '👂',
        '🦻',
        '👃',
        '🧠',
        '🫀',
        '🫁',
        '🦷',
        '🦴',
        '👀',
        '👁️',
        '👅',
        '👄',
        '💋',
        '🩸',
        '👶',
        '🧒',
        '👦',
        '👧',
        '🧑',
        '👱',
        '👨',
        '🧔',
        '👨‍🦰',
        '👨‍🦱',
        '👨‍🦳',
        '👨‍🦲',
        '👩',
        '👩‍🦰',
        '🧑‍🦰',
        '👩‍🦱',
        '🧑‍🦱',
        '👩‍🦳',
        '🧑‍🦳',
        '👩‍🦲',
        '🧑‍🦲',
        '👱‍♀️',
        '👱‍♂️',
        '🧓',
        '👴',
        '👵',
        '🙍',
        '🙍‍♂️',
        '🙍‍♀️',
        '🙎',
        '🙎‍♂️',
        '🙎‍♀️',
        '🙅',
        '🙅‍♂️',
        '🙅‍♀️',
        '🙆',
        '🙆‍♂️',
        '🙆‍♀️',
        '💁',
        '💁‍♂️',
        '💁‍♀️',
        '🙋',
        '🙋‍♂️',
        '🙋‍♀️',
        '🧏',
        '🧏‍♂️',
        '🧏‍♀️',
        '🙇',
        '🙇‍♂️',
        '🙇‍♀️',
        '🤦',
        '🤦‍♂️',
        '🤦‍♀️',
        '🤷',
        '🤷‍♂️',
        '🤷‍♀️',
      ],
    },
    {
      'name': '동물',
      'emojis': [
        '🐵',
        '🐒',
        '🦍',
        '🦧',
        '🐶',
        '🐕',
        '🦮',
        '🐕‍🦺',
        '🐩',
        '🐺',
        '🦊',
        '🦝',
        '🐱',
        '🐈',
        '🐈‍⬛',
        '🦁',
        '🐯',
        '🐅',
        '🐆',
        '🐴',
        '🐎',
        '🦄',
        '🦓',
        '🦌',
        '🐮',
        '🐂',
        '🐃',
        '🐄',
        '🐷',
        '🐖',
        '🐗',
        '🐽',
        '🐏',
        '🐑',
        '🐐',
        '🐪',
        '🐫',
        '🦙',
        '🦒',
        '🐘',
        '🦏',
        '🦛',
        '🐭',
        '🐁',
        '🐀',
        '🐹',
        '🐰',
        '🐇',
        '🐿️',
        '🦔',
        '🦇',
        '🐻',
        '🐻‍❄️',
        '🐨',
        '🐼',
        '🦥',
        '🦦',
        '🦨',
        '🦘',
        '🦡',
        '🦃',
        '🐔',
        '🐓',
        '🐣',
        '🐤',
        '🐥',
        '🐦',
        '🐧',
        '🕊️',
        '🦅',
        '🦆',
        '🦢',
        '🦉',
        '🦩',
        '🦚',
        '🦜',
        '🐸',
        '🐊',
        '🐢',
        '🦎',
        '🐍',
        '🐲',
        '🐉',
        '🦕',
        '🦖',
        '🐳',
        '🐋',
        '🐬',
        '🐟',
        '🐠',
        '🐡',
        '🦈',
        '🐙',
        '🐚',
        '🐌',
        '🦋',
        '🐛',
        '🐜',
        '🐝',
        '🐞',
        '🦗',
        '🕷️',
        '🕸️',
        '🦂',
        '🦟',
        '🦠',
      ],
    },
    {
      'name': '음식',
      'emojis': [
        '🍇',
        '🍈',
        '🍉',
        '🍊',
        '🍋',
        '🍌',
        '🍍',
        '🥭',
        '🍎',
        '🍏',
        '🍐',
        '🍑',
        '🍒',
        '🍓',
        '🥝',
        '🍅',
        '🥥',
        '🥑',
        '🍆',
        '🥔',
        '🥕',
        '🌽',
        '🌶️',
        '🥒',
        '🥬',
        '🥦',
        '🧄',
        '🧅',
        '🍄',
        '🥜',
        '🌰',
        '🍞',
        '🥐',
        '🥖',
        '🥨',
        '🥯',
        '🥞',
        '🧇',
        '🧀',
        '🍖',
        '🍗',
        '🥩',
        '🥓',
        '🍔',
        '🍟',
        '🍕',
        '🌭',
        '🥪',
        '🌮',
        '🌯',
        '🥙',
        '🧆',
        '🥚',
        '🍳',
        '🥘',
        '🍲',
        '🥣',
        '🥗',
        '🍿',
        '🧈',
        '🧂',
        '🥫',
        '🍱',
        '🍘',
        '🍙',
        '🍚',
        '🍛',
        '🍜',
        '🍝',
        '🍠',
        '🍢',
        '🍣',
        '🍤',
        '🍥',
        '🥮',
        '🍡',
        '🥟',
        '🥠',
        '🥡',
        '🦀',
        '🦞',
        '🦐',
        '🦑',
        '🦪',
        '🍦',
        '🍧',
        '🍨',
        '🍩',
        '🍪',
        '🎂',
        '🍰',
        '🧁',
        '🥧',
        '🍫',
        '🍬',
        '🍭',
        '🍮',
        '🍯',
        '🍼',
        '🥛',
        '☕',
        '🍵',
        '🍶',
        '🍾',
        '🍷',
        '🍸',
        '🍹',
        '🍺',
        '🍻',
        '🥂',
        '🥃',
        '🥤',
        '🧃',
        '🧉',
        '🧊',
      ],
    },
    {
      'name': '활동',
      'emojis': [
        '⚽',
        '🏀',
        '🏈',
        '⚾',
        '🥎',
        '🎾',
        '🏐',
        '🏉',
        '🥏',
        '🎱',
        '🪀',
        '🏓',
        '🏸',
        '🏒',
        '🏑',
        '🥍',
        '🏏',
        '🪃',
        '🥅',
        '⛳',
        '🪁',
        '🏹',
        '🎣',
        '🤿',
        '🥊',
        '🥋',
        '🎽',
        '🛹',
        '🛼',
        '🛷',
        '⛸️',
        '🥌',
        '🎿',
        '⛷️',
        '🏂',
        '🪂',
        '🏋️',
        '🏋️‍♂️',
        '🏋️‍♀️',
        '🤼',
        '🤼‍♂️',
        '🤼‍♀️',
        '🤸',
        '🤸‍♂️',
        '🤸‍♀️',
        '⛹️',
        '⛹️‍♂️',
        '⛹️‍♀️',
        '🤺',
        '🤾',
        '🤾‍♂️',
        '🤾‍♀️',
        '🏌️',
        '🏌️‍♂️',
        '🏌️‍♀️',
        '🏇',
        '🧘',
        '🧘‍♂️',
        '🧘‍♀️',
        '🏄',
        '🏄‍♂️',
        '🏄‍♀️',
        '🏊',
        '🏊‍♂️',
        '🏊‍♀️',
        '🤽',
        '🤽‍♂️',
        '🤽‍♀️',
        '🚣',
        '🚣‍♂️',
        '🚣‍♀️',
        '🧗',
        '🧗‍♂️',
        '🧗‍♀️',
        '🚵',
        '🚵‍♂️',
        '🚵‍♀️',
        '🚴',
        '🚴‍♂️',
        '🚴‍♀️',
        '🏆',
        '🥇',
        '🥈',
        '🥉',
        '🏅',
        '🎖️',
        '🏵️',
        '🎗️',
        '🎫',
        '🎟️',
        '🎪',
        '🎭',
        '🎨',
        '🎬',
        '🎤',
        '🎧',
        '🎼',
        '🎹',
        '🥁',
        '🎷',
        '🎺',
        '🎸',
        '🪕',
        '🎻',
        '🎲',
        '♟️',
        '🎯',
        '🎳',
        '🎮',
        '🎰',
        '🧩',
      ],
    },
    {
      'name': '여행',
      'emojis': [
        '🚗',
        '🚕',
        '🚙',
        '🚌',
        '🚎',
        '🏎️',
        '🚓',
        '🚑',
        '🚒',
        '🚐',
        '🚚',
        '🚛',
        '🚜',
        '🦯',
        '🦽',
        '🦼',
        '🛴',
        '🚲',
        '🛵',
        '🏍️',
        '🛺',
        '🚨',
        '🚔',
        '🚍',
        '🚘',
        '🚖',
        '🚡',
        '🚠',
        '🚟',
        '🚃',
        '🚋',
        '🚞',
        '🚝',
        '🚄',
        '🚅',
        '🚈',
        '🚂',
        '🚆',
        '🚇',
        '🚊',
        '🚉',
        '✈️',
        '🛫',
        '🛬',
        '🛩️',
        '💺',
        '🛰️',
        '🚀',
        '🛸',
        '🚁',
        '🛶',
        '⛵',
        '🚤',
        '🛥️',
        '🛳️',
        '⛴️',
        '🚢',
        '⚓',
        '🚧',
        '⛽',
        '🚏',
        '🚦',
        '🚥',
        '🗺️',
        '🗿',
        '🗽',
        '🗼',
        '🏰',
        '🏯',
        '🏟️',
        '🎡',
        '🎢',
        '🎠',
        '⛲',
        '⛱️',
        '🏖️',
        '🏝️',
        '🏜️',
        '🌋',
        '⛰️',
        '🏔️',
        '🗻',
        '🏕️',
        '⛺',
        '🏠',
        '🏡',
        '🏘️',
        '🏚️',
        '🏗️',
        '🏭',
        '🏢',
        '🏬',
        '🏣',
        '🏤',
        '🏥',
        '🏦',
        '🏨',
        '🏪',
        '🏫',
        '🏩',
        '💒',
        '🏛️',
        '⛪',
        '🕌',
        '🕍',
        '🛕',
        '🕋',
        '⛩️',
        '🛤️',
        '🛣️',
        '🗾',
        '🎑',
        '🏞️',
        '🌅',
        '🌄',
        '🌠',
        '🎇',
        '🎆',
        '🌇',
        '🌆',
        '🏙️',
        '🌃',
        '🌌',
        '🌉',
        '🌁',
      ],
    },
    {
      'name': '기호',
      'emojis': [
        '❤️',
        '🧡',
        '💛',
        '💚',
        '💙',
        '💜',
        '🖤',
        '🤍',
        '🤎',
        '💔',
        '❣️',
        '💕',
        '💞',
        '💓',
        '💗',
        '💖',
        '💘',
        '💝',
        '💟',
        '☮️',
        '✝️',
        '☪️',
        '🕉️',
        '☸️',
        '✡️',
        '🔯',
        '🕎',
        '☯️',
        '☦️',
        '🛐',
        '⛎',
        '♈',
        '♉',
        '♊',
        '♋',
        '♌',
        '♍',
        '♎',
        '♏',
        '♐',
        '♑',
        '♒',
        '♓',
        '🆔',
        '⚛️',
        '🉑',
        '☢️',
        '☣️',
        '📴',
        '📳',
        '🈶',
        '🈚',
        '🈸',
        '🈺',
        '🈷️',
        '✴️',
        '🆚',
        '💮',
        '🉐',
        '㊙️',
        '㊗️',
        '🈴',
        '🈵',
        '🈹',
        '🈲',
        '🅰️',
        '🅱️',
        '🆎',
        '🆑',
        '🅾️',
        '🆘',
        '❌',
        '⭕',
        '🛑',
        '⛔',
        '📛',
        '🚫',
        '💯',
        '💢',
        '♨️',
        '🚷',
        '🚯',
        '🚳',
        '🚱',
        '🔞',
        '📵',
        '🚭',
        '❗',
        '❕',
        '❓',
        '❔',
        '‼️',
        '⁉️',
        '🔅',
        '🔆',
        '〽️',
        '⚠️',
        '🚸',
        '🔱',
        '⚜️',
        '🔰',
        '♻️',
        '✅',
        '🈯',
        '💹',
        '❇️',
        '✳️',
        '❎',
        '🌐',
        '💠',
        'Ⓜ️',
        '🌀',
        '💤',
        '🏧',
        '🚾',
        '♿',
        '🅿️',
        '🛗',
        '🈳',
        '🈂️',
        '🛂',
        '🛃',
        '🛄',
        '🛅',
        '🚹',
        '🚺',
        '🚼',
        '⚧️',
        '🚻',
        '🚮',
        '🎦',
        '📶',
        '🈁',
        '🔣',
        'ℹ️',
        '🔤',
        '🔡',
        '🔠',
        '🆖',
        '🆗',
        '🆙',
        '🆒',
        '🆕',
        '🆓',
        '0️⃣',
        '1️⃣',
        '2️⃣',
        '3️⃣',
        '4️⃣',
        '5️⃣',
        '6️⃣',
        '7️⃣',
        '8️⃣',
        '9️⃣',
        '🔟',
        '🔢',
        '#️⃣',
        '*️⃣',
        '⏏️',
        '▶️',
        '⏸️',
        '⏯️',
        '⏹️',
        '⏺️',
        '⏭️',
        '⏮️',
        '⏩',
        '⏪',
        '⏫',
        '⏬',
        '◀️',
        '🔼',
        '🔽',
        '➡️',
        '⬅️',
        '⬆️',
        '⬇️',
        '↗️',
        '↘️',
        '↙️',
        '↖️',
        '↕️',
        '↔️',
        '↪️',
        '↩️',
        '⤴️',
        '⤵️',
        '🔀',
        '🔁',
        '🔂',
        '🔄',
        '🔃',
        '🎵',
        '🎶',
        '➕',
        '➖',
        '➗',
        '✖️',
        '♾️',
        '💲',
        '💱',
        '™️',
        '©️',
        '®️',
        '〰️',
        '➰',
        '➿',
        '🔚',
        '🔙',
        '🔛',
        '🔝',
        '🔜',
        '✔️',
        '☑️',
        '🔘',
        '🔴',
        '🟠',
        '🟡',
        '🟢',
        '🔵',
        '🟣',
        '⚫',
        '⚪',
        '🟤',
        '🔺',
        '🔻',
        '🔸',
        '🔹',
        '🔶',
        '🔷',
        '🔳',
        '🔲',
        '▪️',
        '▫️',
        '◾',
        '◽',
        '◼️',
        '◻️',
        '🟥',
        '🟧',
        '🟨',
        '🟩',
        '🟦',
        '🟪',
        '⬛',
        '⬜',
        '🟫',
        '🔈',
        '🔇',
        '🔉',
        '🔊',
        '🔔',
        '🔕',
        '📣',
        '📢',
        '💬',
        '💭',
        '🗯️',
        '♠️',
        '♣️',
        '♥️',
        '♦️',
        '🃏',
        '🎴',
        '🀄',
        '🕐',
        '🕑',
        '🕒',
        '🕓',
        '🕔',
        '🕕',
        '🕖',
        '🕗',
        '🕘',
        '🕙',
        '🕚',
        '🕛',
        '🕜',
        '🕝',
        '🕞',
        '🕟',
        '🕠',
        '🕡',
        '🕢',
        '🕣',
        '🕤',
        '🕥',
        '🕦',
        '🕧',
      ],
    },
  ];

  @override
  void initState() {
    super.initState();
    _tabController = TabController(length: _categories.length, vsync: this);
  }

  @override
  void dispose() {
    _tabController.dispose();
    super.dispose();
  }

  // 클립보드에 이모지 복사하는 함수
  void _copyToClipboard(String emoji) {
    Clipboard.setData(ClipboardData(text: emoji));
    setState(() {
      _selectedEmoji = emoji;
      _copied = true;
    });

    // 복사 표시를 잠시 후에 사라지게 함
    Future.delayed(const Duration(seconds: 1), () {
      if (mounted) {
        setState(() {
          _copied = false;
        });
      }
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        backgroundColor: Theme.of(context).colorScheme.inversePrimary,
        title: Text(widget.title),
        bottom: TabBar(
          controller: _tabController,
          isScrollable: true,
          tabs: _categories
              .map((category) => Tab(text: category['name']))
              .toList(),
        ),
      ),
      body: Column(
        children: [
          Expanded(
            child: TabBarView(
              controller: _tabController,
              children: _categories.map((category) {
                return GridView.builder(
                  padding: const EdgeInsets.all(10),
                  gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
                    crossAxisCount: 6,
                    childAspectRatio: 1.0,
                    crossAxisSpacing: 10,
                    mainAxisSpacing: 10,
                  ),
                  itemCount: category['emojis'].length,
                  itemBuilder: (context, index) {
                    final emoji = category['emojis'][index];
                    return GestureDetector(
                      onTap: () => _copyToClipboard(emoji),
                      child: Container(
                        decoration: BoxDecoration(
                          color: _selectedEmoji == emoji && _copied
                              ? Colors.greenAccent.withOpacity(0.3)
                              : Colors.grey.withOpacity(0.1),
                          borderRadius: BorderRadius.circular(12),
                        ),
                        child: Center(
                          child: Text(
                            emoji,
                            style: const TextStyle(fontSize: 28),
                          ),
                        ),
                      ),
                    );
                  },
                );
              }).toList(),
            ),
          ),
          // 복사된 이모지 표시 영역
          Container(
            height: 60,
            color: Colors.grey.withOpacity(0.1),
            child: Center(
              child: _copied
                  ? Row(
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        Text(
                          _selectedEmoji,
                          style: const TextStyle(fontSize: 24),
                        ),
                        const SizedBox(width: 10),
                        const Icon(Icons.check_circle, color: Colors.green),
                        const SizedBox(width: 5),
                        const Text('클립보드에 복사되었습니다!'),
                      ],
                    )
                  : const Text('이모지를 탭하면 클립보드에 복사됩니다'),
            ),
          ),
        ],
      ),
    );
  }
}
